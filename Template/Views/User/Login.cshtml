
@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <script type="text/javascript" src="~/Content/script/jquery-1.8.3.min.js"></script>
    <title>登录</title>
</head>
<body>
    <div>
        <input name="url" type="hidden" value="@ViewBag.Url" />
        <input name="userName" type="text" placeholder="请输入用户名" /><br />
        <input name="userPwd" type="password" placeholder="请输入密码" /><br />
        <input type="button" value="登录" onclick="Login()" />
    </div>
</body>
</html>

<script type="text/javascript">
    //判断字符是否为空的方法
    function isEmpty(obj) {
        if (typeof obj == "undefined" || obj == null || obj == "") {
            return true;
        } else {
            return false;
        }
    }
    //登录
    function Login() {
        var name = $('input[name=userName]').val();
        var pwd = $('input[name=userPwd]').val();
        var data = { 'name': name, 'pwd': pwd };
        $.post('login', data, (res) => {
            if (res.state) {
                var url = $('input[name=url]').val();
                if (isEmpty(url)) {
                    url = 'sys/index';
                }
                window.location.href = url;
            } else {
                alert(res.message);
            }
        }, 'json');
    }
</script>
